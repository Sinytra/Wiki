import {RefreshCwIcon, SettingsIcon, TrashIcon} from "lucide-react";

# 发布

学习如何在我们的网站上发布您的文档！

## 开发者面板

您可以通过点击主页或页脚上的 `开发者区域` 按钮访问我们的 [开发者面板](../dev)。

### 首次登录

如果您是第一次登录，您将被重定向到登录页面，您可以使用 **GitHub 账户** 登录。

GitHub 会要求您授权我们的 GitHub 应用程序访问您的账户。它仅需要用于验证身份和仓库访问权限的最小权限。批准请求后，您将自动进入开发者面板。

## 注册项目

要向 Wiki 添加新项目，请点击 `添加项目` 按钮。这将打开一个模态对话框，要求您填写以下信息：

- `所有者` - GitHub 仓库所有者。可以是用户或组织
- `名称` - GitHub 仓库名称
- `分支` - 文档所在的分支名称
- `文档根路径` - 仓库中文档根文件夹的路径。应以 `/` 开头。

填写完毕后，点击 `提交` 按钮完成注册过程。

如果注册成功，恭喜！尝试在 Wiki 上打开该项目以查看渲染结果。

**如果您遇到任何错误，请参阅下面的故障排除部分。如果问题仍然存在，请[联系我们](./help)。**

<Callout>
    由于 Wiki 内容是惰性加载的，首次访问页面时可能会有稍微增加的加载时间，但这只会在首次打开给定页面时发生，并且之后会为所有访客**缓存**，实现几乎即时的导航时间。
</Callout>

（别忘了告诉您的用户，他们现在可以在我们这里找到您模组的文档 :)）

<Callout>
    如果您更改了 GitHub 上的默认分支（例如，在移植模组到更新版本时），请不要忘记在 Wiki 项目的设置中更新源分支，以便网站可以继续显示最新的文档版本。
</Callout>

#### 故障排除

> 请首先在您的仓库上安装我们的 GitHub 应用程序（这里）。

1. **可能原因：** 维基 GitHub 应用程序未安装在项目的 GitHub 仓库上，因此无法访问它。
   **解决方法：** 导航到错误消息提供的链接并授予维基 GitHub 应用程序访问您的仓库的权限。只需授予其对项目仓库的访问权限即可，无需一次性授予所有仓库的权限。不用担心离开页面——已填写的信息将保存并在您返回时自动填入。

2. **可能原因：** 提供的 GitHub 仓库不存在。
   **解决方法：** 确保您正确填写了仓库的 `所有者` 和 `名称` 字段。这些应该与 URL 中看到的仓库 `owner/name` 对应，例如 `https://github.com/Sinytra/Wiki` 使用 `Sinytra` 作为所有者，`Wiki` 作为名称。

> 验证错误

- **可能原因：** 您的模组托管平台项目（见[文档元数据](./devs#wiki-metadata)）没有提供指向模组 GitHub 仓库的源代码链接。\
  **解决方法：** 为了验证项目所有权，请暂时将项目的源代码 URL 设置为匹配 GitHub 仓库 URL。

<details>
    <summary>展开以获取 Modrinth 项目的帮助</summary>

    1. 打开项目的设置。
    2. 导航到 `链接` 标签。
    3. 在 `源代码` 字段中输入 GitHub 仓库 URL。
    4. 应用更改。

    ![](/meta-docs-assets/mr_src_url.png)
</details>
<p/>
<details>
    <summary>展开以获取 CurseForge 项目的帮助</summary>

    1. 打开项目的设置。
    2. 导航到 `源` 标签。
    3. 在 `Repository URL` 字段中输入 GitHub 仓库 URL。
    4. 应用更改。

    ![](/meta-docs-assets/cf_src_url.png)
</details>

> 用户无权访问仓库。

您的仓库访问权限不足以将其注册到 Wiki。请确保您至少具有 **维护** 或 **管理员** 权限。

> 提供的路径无效

提供的路径不存在或是一个普通文件。请确保路径指向仓库中现有的目录。无需在路径前加上分支或标签名。

此字段等同于 GitHub 的 "[获取仓库内容](https://docs.github.com/en/rest/repos/contents?apiVersion=2022-11-28#get-repository-content)" REST API 路由中的 `path` 参数。

## 项目管理

在您的开发者面板上，您可以找到几个选项来管理您的模组项目。详细描述如下。

### <RefreshCwIcon className="inline-block mr-1 w-5 h-5"/> 重新验证项目

清除所有缓存的文档页面，强制它们按需重新渲染。
只有在更新文档源时才应使用此选项。

为了方便起见，我们建议在发布后使用我们的 [Gradle 插件](./devs#-gradle-plugin-companion) 自动重新验证文档。

### <SettingsIcon className="inline-block mr-1 w-5 h-5"/> 编辑项目

编辑注册时设置的项目参数。更新期间将重新验证项目的所属关系。

### <TrashIcon className="inline-block mr-1 w-5 h-5"/> 删除项目

永久删除项目并从我们的服务器中移除所有相关数据。文档页面的缓存将立即清除，但可能需要一些时间传播到 CDN 和浏览器客户端。

**这是一个破坏性操作，无法撤销。**
